<!DOCTYPE html>
<html>
  <head>
    <title>vKYC Platform</title>

    <meta content="width=device-width, initial-scale=1" name="viewport" />

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Acme&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Jost:wght@400&display=swap"
      rel="stylesheet"
    />

    <!-- Bootstrap 5 CSS CDN -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://use.fontawesome.com/releases/v5.7.2/css/all.css"
      integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="assets/css/app.css" type="text/css" />
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"
      integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>

    <!-- Owl Carousal CSS CDN -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.min.css"
      integrity="sha512-tS3S5qG0BlhnQROyJXvNjeEM4UpMXHrQfTGmbQ1gKmelCxlSEBUaxhRBj/EFTzpbP4RVSrpEikbmdJobCvhE3g=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.theme.default.min.css"
      integrity="sha512-sMXtMNL1zRzolHYKEujM2AqCLUR9F2C4/05cdbxjjLSRvMQIciEPCQZo++nk7go3BtSuK9kfa/s+a4f4i5pLkw=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <style>
      .floating {
        -webkit-animation-name: Floatingx;
        animation-name: Floatingx;
        -webkit-animation-duration: 1.5s;
        animation-duration: 1.5s;
        -webkit-animation-iteration-count: infinite;
        animation-iteration-count: infinite;
        -webkit-animation-timing-function: ease-in-out;
        animation-timing-function: ease-in-out;
        -moz-animation-name: Floating;

        -moz-animation-duration: 1.5s;

        -moz-animation-iteration-count: infinite;
        -moz-animation-timing-function: ease-in-out;
        margin-left: 30px;
        margin-top: 5px;
      }

      @keyframes Floatingx {
        from {
          -webkit-transform: translate(0, 0px);
        }
        65% {
          -webkit-transform: translate(0, 15px);
        }
        to {
          -webkit-transform: translate(0, -0px);
        }
      }

      @keyframes Floating {
        from {
          -moz-transform: translate(0, 0px);
        }
        65% {
          -moz-transform: translate(0, 15px);
        }
        to {
          -moz-transform: translate(0, -0px);
        }
      }

      .btn {
        text-decoration: none;
        background-color: #260452d3 !important;
        color: #f3f3f3;
        text-align: center;
        border-radius: 0.25rem;
        cursor: pointer;
        transition: 0.3s;
      }
      .btn:hover {
        background-color: #260452d3 !important;
      }
    </style>
  </head>
  <body
    style="
      background-image: url('style/images/otpbg2.png');
      background-repeat: no-repeat;
      background-position: bottom 100px left 350px;
      background-size: 1000px;
      overflow: hidden;
    "
  >
    <h1
      class="floating"
      style="color: #260452d3; position: relative; left: 600px; font-size: 80px"
    >
      KYeasy
    </h1>

    <div
      class="container d-flex justify-content-center align-items-center"
      style="height: 100vh"
    >
      <div
        style="
          width: 25rem;
          background: rgba(252, 252, 252, 0.808);
          border-radius: 40px;
          position: relative;
          bottom: 140px;
          left: -40px;
        "
      >
        <div class="card-body">
          <h5 class="card-title">
            Your vKYC has been currently shared with all banks.
          </h5>
          <p class="card-text"> 
            <div class="input-group">
                <label class="pure-material-textfield-outlined" style="width: 100%;"> Add Bank:
                <input list="banks" name="bankname" id="bankname" class="form-control" placeholder="Select Bank">
                </label>
                <datalist id ="banks">
                    <option value="All" >
                    <option value="Bank of Baroda">
                <option value="Bank of India">
                <option value="Bank of Maharashtra">
                <option value="Canara Bank">
                <option value="Central Bank of India">
                <option value="Indian Bank">
                <option value="Indian Overseas Bank">
                <option value="Punjab National Bank">
                <option value="State Bank of India">
                <option value="Union Bank of India">
                <option value="Axis Bank Ltd">
                <option value="Dhanlaxmi Bank Ltd">
                <option value="HDFC Bank Ltd">
                <option value="ICICI Bank Ltd">
                <option value="Induslnd Bank Ltd">
                <option value="IDFC First Bank Ltd">
                <option value="Kotak Mahindra Bank Ltd">
                <option value="YES Bank Ltd">
                <option value="IDBI Bank Ltd">
                <option value="Paytm Payments Bank Limited">
                <option value="HSBC Ltd">
    
                </datalist>
              </div>      
        </p>
          <button type="button" class="btn btn-primary otp-btn"> Get OTP </button>
          <div class="d-none justify-content-center align-items-center hidden-class">
            <input type="text" class="form-control my-3 me-2 otp-text" placeholder="Enter OTP" />
            <button type="button" class="btn btn-primary enter-otp"> Enter </button>
          </div>
          <span class="wrong-message" style="margin: 3px 0 !important;"> </span>
        </div>
      </div>
    </div>
    <script>
      let otp = ''
      document.querySelector(".otp-btn").addEventListener("click", () => {
        let bank = document.querySelector("#bankname").value;
        console.log(bank)
        $.post("/getBank", { bank: bank }).done(function (data) {
          console.log(data);
          console.log(data.data)
          if(data!=null) {
            otp = data.data;
          }
          document.querySelector(".hidden-class").style.cssText =
            "display: flex!important";
          
        });
      });

      document.querySelector('.enter-otp').addEventListener('click', () => {
        console.log(document.querySelector('.otp-text').value, otp);
        if(otp == document.querySelector('.otp-text').value) {
          if (!("Notification" in window)) {
                    alert("This browser does not support system notifications");
                }
                else if (Notification.permission === "granted") {
                    notify();
                    window.location.href= 'http://localhost:3000/mainPage';
                }
                else if (Notification.permission !== 'denied') {
                    Notification.requestPermission(function (permission) {
                    if (permission === "granted") {
                        notify();
                        window.location.href= 'http://localhost:3000/mainPage';
                    }
                    });
                }
                
                function notify() {
                    var notification = new Notification('KYeasy', {
                        body: "Your vKYC details have been successfully updated.",
                    });
                    setTimeout(notification.close.bind(notification), 7000); 
                }
        } else {
          document.querySelector('.wrong-message').innerHTML = 'OTP entered is Invalid!!'
        }
      })
    </script>
  </body>
</html>
